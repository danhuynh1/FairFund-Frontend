{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dhuyn\\\\Sync\\\\Projects\\\\fairfund-frontend\\\\fairfund-frontend\\\\src\\\\components\\\\GoogleLogin.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GoogleLoginButton = () => {\n  _s();\n  const {\n    login\n  } = useContext(AuthContext);\n  const navigate = useNavigate();\n  useEffect(() => {\n    const initializeGoogle = () => {\n      if (window.google && window.google.accounts) {\n        window.google.accounts.id.initialize({\n          client_id: process.env.REACT_APP_GOOGLE_CLIENT_ID,\n          callback: async response => {\n            try {\n              // Need to move this to .env file\n              const res = await axios.post(\"http://localhost:5000/api/users/google-login\", {\n                tokenId: response.credential\n              });\n              console.log(res.data.token);\n              login(res.data.token);\n              navigate(\"/\");\n            } catch (err) {\n              var _err$response;\n              console.error(\"Login failed:\", ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || err.message);\n            }\n          }\n        });\n        window.google.accounts.id.renderButton(document.getElementById(\"google-login\"), {\n          theme: \"outline\",\n          size: \"large\"\n        });\n      } else {\n        setTimeout(initializeGoogle, 100);\n      }\n    };\n    initializeGoogle();\n  }, [login, navigate]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"google-login\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 10\n  }, this);\n};\n_s(GoogleLoginButton, \"Y2+LMvvemV8vYg1DEr0jv47Kmr8=\", false, function () {\n  return [useNavigate];\n});\n_c = GoogleLoginButton;\nexport default GoogleLoginButton;\nvar _c;\n$RefreshReg$(_c, \"GoogleLoginButton\");","map":{"version":3,"names":["useEffect","useContext","useNavigate","axios","AuthContext","jsxDEV","_jsxDEV","GoogleLoginButton","_s","login","navigate","initializeGoogle","window","google","accounts","id","initialize","client_id","process","env","REACT_APP_GOOGLE_CLIENT_ID","callback","response","res","post","tokenId","credential","console","log","data","token","err","_err$response","error","message","renderButton","document","getElementById","theme","size","setTimeout","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/dhuyn/Sync/Projects/fairfund-frontend/fairfund-frontend/src/components/GoogleLogin.js"],"sourcesContent":["import { useEffect, useContext } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\n\r\nconst GoogleLoginButton = () => {\r\n  const { login } = useContext(AuthContext);\r\n  const navigate = useNavigate();\r\n  useEffect(() => {\r\n    const initializeGoogle = () => {\r\n      if (window.google && window.google.accounts) {\r\n        window.google.accounts.id.initialize({\r\n          client_id: process.env.REACT_APP_GOOGLE_CLIENT_ID,\r\n          callback: async (response) => {\r\n            try {\r\n              // Need to move this to .env file\r\n              const res = await axios.post(\r\n                \"http://localhost:5000/api/users/google-login\",\r\n                {\r\n                  tokenId: response.credential,\r\n                }\r\n              );\r\n              \r\n              console.log(res.data.token);\r\n              login(res.data.token);\r\n\r\n              navigate(\"/\");\r\n            } catch (err) {\r\n              console.error(\"Login failed:\", err.response?.data || err.message);\r\n            }\r\n          },\r\n        });\r\n\r\n        window.google.accounts.id.renderButton(\r\n          document.getElementById(\"google-login\"),\r\n          { theme: \"outline\", size: \"large\" }\r\n        );\r\n      } else {\r\n        setTimeout(initializeGoogle, 100);\r\n      }\r\n    };\r\n\r\n    initializeGoogle();\r\n  }, [login, navigate]);\r\n\r\n  return <div id=\"google-login\"></div>;\r\n};\r\n\r\nexport default GoogleLoginButton;\r\n"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,UAAU,QAAQ,OAAO;AAC7C,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,QAAQ,wBAAwB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAErD,MAAMC,iBAAiB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC9B,MAAM;IAAEC;EAAM,CAAC,GAAGR,UAAU,CAACG,WAAW,CAAC;EACzC,MAAMM,QAAQ,GAAGR,WAAW,CAAC,CAAC;EAC9BF,SAAS,CAAC,MAAM;IACd,MAAMW,gBAAgB,GAAGA,CAAA,KAAM;MAC7B,IAAIC,MAAM,CAACC,MAAM,IAAID,MAAM,CAACC,MAAM,CAACC,QAAQ,EAAE;QAC3CF,MAAM,CAACC,MAAM,CAACC,QAAQ,CAACC,EAAE,CAACC,UAAU,CAAC;UACnCC,SAAS,EAAEC,OAAO,CAACC,GAAG,CAACC,0BAA0B;UACjDC,QAAQ,EAAE,MAAOC,QAAQ,IAAK;YAC5B,IAAI;cACF;cACA,MAAMC,GAAG,GAAG,MAAMpB,KAAK,CAACqB,IAAI,CAC1B,8CAA8C,EAC9C;gBACEC,OAAO,EAAEH,QAAQ,CAACI;cACpB,CACF,CAAC;cAEDC,OAAO,CAACC,GAAG,CAACL,GAAG,CAACM,IAAI,CAACC,KAAK,CAAC;cAC3BrB,KAAK,CAACc,GAAG,CAACM,IAAI,CAACC,KAAK,CAAC;cAErBpB,QAAQ,CAAC,GAAG,CAAC;YACf,CAAC,CAAC,OAAOqB,GAAG,EAAE;cAAA,IAAAC,aAAA;cACZL,OAAO,CAACM,KAAK,CAAC,eAAe,EAAE,EAAAD,aAAA,GAAAD,GAAG,CAACT,QAAQ,cAAAU,aAAA,uBAAZA,aAAA,CAAcH,IAAI,KAAIE,GAAG,CAACG,OAAO,CAAC;YACnE;UACF;QACF,CAAC,CAAC;QAEFtB,MAAM,CAACC,MAAM,CAACC,QAAQ,CAACC,EAAE,CAACoB,YAAY,CACpCC,QAAQ,CAACC,cAAc,CAAC,cAAc,CAAC,EACvC;UAAEC,KAAK,EAAE,SAAS;UAAEC,IAAI,EAAE;QAAQ,CACpC,CAAC;MACH,CAAC,MAAM;QACLC,UAAU,CAAC7B,gBAAgB,EAAE,GAAG,CAAC;MACnC;IACF,CAAC;IAEDA,gBAAgB,CAAC,CAAC;EACpB,CAAC,EAAE,CAACF,KAAK,EAAEC,QAAQ,CAAC,CAAC;EAErB,oBAAOJ,OAAA;IAAKS,EAAE,EAAC;EAAc;IAAA0B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAM,CAAC;AACtC,CAAC;AAACpC,EAAA,CAzCID,iBAAiB;EAAA,QAEJL,WAAW;AAAA;AAAA2C,EAAA,GAFxBtC,iBAAiB;AA2CvB,eAAeA,iBAAiB;AAAC,IAAAsC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}